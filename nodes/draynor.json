{
  "name":                       "draynor",
  "description":                "Raspberry Pi 4",

  "set_fqdn":                   "*.local",

  "rpi4_server": {
    "operator_user":            "wizard",

    "ssh_allow_users":          ["wizard", "cleric"],

    "storage": {
      "mount": {
        "eed0a657-7dde-44b0-b08c-13d55b92cecd": {
          "path":               "data",
          "fstype":             "ext4"
        },
        "97f683a7-e2c5-46f8-9ced-1ab38df8df2e": {
          "path":               "archive",
          "fstype":             "ext4"
        }
      },

      "var_mount": {
        "path":                 "data",
        "marker_file":          ".VAR_MOUNT_BIND"
      }
    },

    "swap": {
      "device":                 "eed0a657-7dde-44b0-b08c-13d55b92cecd",
      "file":                   "/storage/data/swapfile",
      "size_mb":                20480
    },

    "zram_swap": {
      "devices":                1,
      "uncompressed_limit_mb":  10240
    },

    "gpio_fan": {
      "gpio_pin":               14,
      "temp_millicelsius":      45000
    }
  },

  "applications": {
    "vim_plug_install": {
      "users":                  ["wizard"]
    }
  },

  "persona": {
    "root_location":            "/storage/data",

    "personal_user": {
      "name":                   "cleric",

      "spellbook": [
      ],

      "removable_media": {
        "46B1-7C38": {
          "path":               "usb-drive",
          "fstype":             "vfat"
        }
      }
    }
  },

  "customization": {
    "urxvt_font": {
      "wizard": {
        "font":                 "Comic Mono",
        "font_size":            10,
        "include_recipe":       "customization::font_comic_mono"
      }
    },
    "urxvt_transparency": {
      "wizard": {
        "shading":              40
      }
    }
  },

  "run_list": [
    "recipe[rpi4_server::cmdline]",
    "recipe[rpi4_server::dtoverlay]",

    "recipe[hostname::default]",

    "recipe[rpi4_server::etc_bashrc]",
    "recipe[rpi4_server::home_config]",

    "recipe[rpi4_server::network]",

    "recipe[rpi4_server::storage]",
    "recipe[rpi4_server::var_mount]",

    "recipe[rpi4_server::swap_space]",
    "recipe[rpi4_server::ulimits]",
    "recipe[rpi4_server::zram]",

    "recipe[rpi4_server::i3wm]",
    "recipe[rpi4_server::x11_config]",

    "recipe[rpi4_server::disable_services]",
    "recipe[rpi4_server::rm_snapd]",
    "recipe[rpi4_server::rm_cloudinit]",
    "recipe[rpi4_server::rm_unattended_upgrades]",

    "recipe[rpi4_server::sshd_config]",

    "recipe[rpi4_server::ufw]",
    "recipe[rpi4_server::fail2ban]",

    "recipe[rpi4_server::nginx]",
    "recipe[rpi4_server::tor]",
    "recipe[rpi4_server::sshd_tor_hidden_service]",
    "recipe[rpi4_server::vpn]",

    "recipe[applications::urxvt]",
    "recipe[applications::vim]",
    "recipe[applications::feh]",
    "recipe[applications::feh_viewer]",

    "recipe[persona::personal_user]"
  ]
}
